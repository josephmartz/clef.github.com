<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Clef.github.com by Clef</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <link rel="stylesheet" href="stylesheets/prettify.css">
    <script type='text/javascript' src='javascripts/prettify.js'></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body onload='prettyPrint();'>
    <div class="wrapper">
      <header>
        <h1><a href='https://clef.io'>Clef</a></h1>
        <p>Celf API Documentation</p>


        <p class="view"><a href="https://github.com/Clef">Visit the Clef GitHub Profile</a></p>
        </br>
        <p><a href='#sample'>Sample Applications</a></p>
        <p><a href='https://developer.clef.io/information'>Setup Clef on your website in 5 minutes</a></p>
        <p><a href='#documentation'>Documentation</a></p>

      </header>
      <section>
        <h1>Welcome to Clef</h1>
        </br>
        <p>Clef is a new way to manage identity on the web. Rather than remember hundreds of usernames and passwords, Clef makes authentication easy and secure. First, website owners integrate the Clef javascript API with their website. Next, users download the Clef mobile application on their phone and set up an account using only their email. Now, users can scan any login QR code on a Clef enabled site and they will instantly authenticate the entire computer. Finally, when users are ready, they can logout on their phone and the computer will be deactivatedâ€”allowing no new logins to Clef enabled sites.</p>
        
        <p>If you're here, you are almost certainly a website owner looking to integrate Clef with your website. Below, you can find <a href='#sample'>sample applications built using Clef in Ruby, Python, and Javascript</a> and <a href='#documentation'>in-depth documentation on the API.</a></p> 

        <p>If you're looking for a more indepth tutorial, visit our <a href="https://developer.clef.io/information">5 minute setup page</a>.</p>
        <div id='sample'>
          </br>
          </br>
          <h2>Sample applications using the Clef API</h2>
          </br>
          <p>To help with the development process, we've created some sample applications, which can be used as a basis for integrating Clef into your application. Right now, we have the following sample applications:</p>
          <ul>
            <li><a href='https://github.com/Clef/Sample-Applications/tree/master/ruby'>Ruby</a></li>
            <li><a href='#'>Python</a></li>
            <li><a href='#'>Node</a></li>
          </ul>
        </div>
        </br>
        </br>
        </br>
        
        <div id='documentation'>
          <h2>Clef API Documentation</h2>
          </br>
          </br>
          <h3>Javascript</h3>
          <p>The front end Clef javascript API is essential to Clef integration in your application. It <i>must</i> be included on any page where you want users to be able to log in with Clef.</p>
          <h4>Initialization</h4>
          <p>You must initialize the API on every page that involves Clef authentication</p>
          <pre>
            <code class='prettyprint'>
var clef = Clef('APPLICATION_ID');
            </code>
          </pre>
          <h4>initFrame(options)</h4>
          <p>To generate the Clef QR code that allows users to authenticate, you must call the initFrame method</p>
          <pre>
            <code class='prettyprint'>
clef.initFrame({
  
  // Your preferred width and height of the Clef iFrame.
  // Must be greater than 150 and an INTEGER

  dim: 200, 
  
  // A valid CSS ID (leave out the #) of the div on your page that
  // you want the Clef QR code to appear in

  inside: 'qr', 
  
  // The url that you want users to be redirected to on authentication.
  // On this page, you will exchange the OAuth code for a token
  // and request user information from the Clef API

  redirect_url: 'http://example.com/redirect' 
})
            </code>
          </pre>
          </br>
          <h3>OAuth</h3>
          <p>Clef follows the OAuth 2.0 protocol to authenticate users. Luckily, much of this protocol is abstracted away because of the unique phone to computer interaction Clef provides; therefore, all you need to do is implement the redirect URI and code for token exchange.</p>
          <h4>POST /authorize</h4>
          <p>This is the API route to exchange an OAuth code for an access token.</p>
          <pre>
            <code class='prettyprint'>
<span class='exp'>REQUEST DEFINITION:</span>

POST https://clef.io/api/authorize

Parameters:
access_token={YOUR_USER_ACCESS_TOKEN}
&amp;app_id={YOUR_APP_ID}
&amp;app_secret={YOUR_APP_SECRET}

<span class='exp'>EXAMPLE REQUEST:</span>

curl --data "access_token=4asd3fjdkf3sdqet03jd&app_id=1234&app_secret=56789" https://clef.io/api/authorize
<span class='exp'>EXAMPLE SUCCESS RESPONSE:</span>

{
  {
    access_token: '1234567'
  }
}

<span class='exp'>POSSIBLE ERROR RESPONSES:</span>

//provided app ID does not correspond to an application
{
  {
    error: 'Invalid App ID.'
  }
}

//provided app secret is incorrect or not present
{
  {
    error: 'Invalid App Secret.'
  }
}

//provided OAuth code is incorrect or not present
{
  {
    error: 'Invalid OAuth Code.'
  }
}

                </code>
              </pre>
          </br>
          <h3>User Information</h3>
          <p>Right now, there is only one API route to get access about the user. In the future, Clef will support API calls to other services that the user can connect like Twitter, Instagram, or Stripe.</p>
          <h4>POST /info</h4>
          <p>This API request returns all available information for the user.</p>
          
                  <pre>
                    <code class='prettyprint'>
<span class='exp'>REQUEST DEFINITION:</span>

POST https:///clef.io/api/info

Parameters:
access_token={YOUR_USER_ACCESS_TOKEN}

<span class='exp'>EXAMPLE REQUEST:</span>

curl --data "access_token=4asd3fjdkf3sdqet03jd" https://clef.io/api/info
<span class='exp'>EXAMPLE SUCCESS RESPONSE:</span>

{
  {
    id: '12345',
    first_name: 'Jesse',
    last_name: 'Pollak',
    phone_number: '1234567890',
    email: 'jesse@clef.io'
  }
}

<span class='exp'>POSSIBLE ERROR RESPONSES:</span>

//provided OAuth token is invalid or not present
{
  {
    error: 'Invalid token.'
  }
}
                    </code>
                  </pre>
        </div>           
      </section>
      
      <footer>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
